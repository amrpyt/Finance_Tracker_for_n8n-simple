# Technology Stack Reference

**Version:** 1.0  
**Last Updated:** 2025-09-30

This document provides the definitive technology selections for the Personal Finance Tracker Telegram Bot. All development must use these exact versions and tools.

---

## Core Technologies

### Backend Stack (Convex)

| Technology | Version | Purpose |
|-----------|---------|---------|
| **Convex** | Latest | Serverless backend platform |
| **TypeScript** | 5.3+ | Convex function development |
| **Convex DB** | Built-in | Real-time database |

### AI/LLM Integration

| Technology | Version | Purpose |
|-----------|---------|---------|
| **Rork Toolkit API** | Latest | Natural language understanding |
| **Function Calling** | N/A | Structured AI responses |

---

## Development Tools

### Testing

| Tool | Version | Purpose |
|------|---------|---------|
| **Vitest** | 1.0+ | Convex function tests |
| **Convex Test** | Built-in | Convex integration tests |

### Build & Deployment

| Tool | Version | Purpose |
|------|---------|---------|
| **npm** | 9+ | Package management |
| **esbuild** | Built-in | Convex bundling |
| **GitHub Actions** | N/A | CI/CD pipeline |

### Code Quality

| Tool | Version | Purpose |
|------|---------|---------|
| **ESLint** | 8+ | Linting |
| **Prettier** | 3+ | Code formatting |
| **TypeScript** | 5.3+ | Type checking |

---

## Infrastructure & Hosting

### Deployment Platforms

| Platform | Purpose | Tier |
|----------|---------|------|
| **Convex Cloud** | Backend hosting | Free tier (1M calls/month) |
| **GitHub** | Source control & CI/CD | Free |

### Monitoring & Logging

| Tool | Purpose |
|------|---------|
| **Convex Dashboard** | Function logs & metrics |
| **Console Logging** | Development debugging |

---

## Package Dependencies

### Root (`package.json`)

```json
{
  "name": "finance-tracker-telegram-bot",
  "version": "1.0.0",
  "private": true,
  "scripts": {
    "dev": "npx convex dev",
    "deploy": "npx convex deploy",
    "test": "echo \"No tests specified\"",
    "lint": "prettier --check \"**/*.{ts,tsx,json,md}\"",
    "format": "prettier --write \"**/*.{ts,tsx,json,md}\""
  },
  "devDependencies": {
    "@types/node": "^20.10.0",
    "prettier": "^3.1.0",
    "typescript": "^5.3.0"
  },
  "dependencies": {
    "convex": "^1.27.3"
  }
}
```

---

## Version Constraints

### Critical Version Requirements

- **Node.js:** Must be 18.x or higher (for native fetch support)
- **TypeScript:** Must be 5.3+ (for Convex compatibility)
- **Convex:** Always use latest version (auto-updated by CLI)

### Upgrade Policy

- **Patch versions:** Auto-update allowed (e.g., 5.3.2 → 5.3.3)
- **Minor versions:** Review and test before upgrading (e.g., 5.3 → 5.4)
- **Major versions:** Requires architecture review (e.g., 5.x → 6.x)

---

## Environment Requirements

### Development Environment

```bash
Node.js: 18.x LTS
npm: 9.x
OS: Windows, macOS, or Linux
RAM: 4GB minimum
```

### Production Environment

```bash
Convex: Managed runtime
Regions: Global (Convex)
```

---

## External Service Requirements

### Required API Keys

1. **Telegram Bot Token** (from @BotFather)
2. **Convex Deployment URL** (auto-generated by Convex CLI)

### Optional Services (Post-MVP)

- **Sentry** - Error tracking
- **LogRocket** - Session replay
- **Datadog** - Advanced monitoring

---

## Technology Selection Rationale

### Why Convex?

- **Zero database management:** No SQL, migrations, or scaling concerns
- **Real-time capabilities:** Built-in reactivity for future features
- **TypeScript-first:** Type safety across frontend and backend
- **Generous free tier:** 1M function calls/month sufficient for 100-1000 users
- **Automatic scaling:** Handles traffic spikes without configuration

### Why Telegram Bot API?

- **No frontend development:** Users already have Telegram installed
- **Rich messaging features:** Markdown, buttons, inline keyboards
- **Global reach:** 700M+ active users worldwide
- **Free infrastructure:** No hosting costs for messaging
- **Arabic support:** Native RTL text rendering

### Why Rork Toolkit?

- **Specified in PRD:** Client requirement
- **Function calling support:** Structured AI responses
- **Competitive pricing:** Cost-effective for MVP
- **Arabic language support:** Critical for target market

### Why Node.js + TypeScript?

- **Convex requirement:** Convex functions must be TypeScript
- **Type safety:** End-to-end
- **Ecosystem:** Rich npm ecosystem for Convex tooling
- **Performance:** Sufficient for I/O-bound workload

---

## Deprecated/Avoided Technologies

### Not Using

- ❌ **OpenAI/Anthropic APIs:** Rork Toolkit specified in PRD
- ❌ **Traditional databases (PostgreSQL, MongoDB):** Convex DB provides all needed features
- ❌ **Docker/Kubernetes:** Serverless deployment eliminates need
- ❌ **Redis:** Convex provides built-in caching
- ❌ **GraphQL:** Simple Convex functions sufficient for MVP
- ❌ **Standalone bot servers (Express/Railway):** Replaced by Convex HTTP Actions

---

## Future Technology Considerations

### Post-MVP Additions

- **Sentry:** Error tracking and monitoring
- **Playwright:** E2E testing automation
- **Turborepo:** If monorepo grows beyond 3 packages
- **Redis:** If caching needs exceed Convex capabilities
- **WhatsApp Business API:** Multi-platform expansion

---

**Document Owner:** Architect  
**Review Frequency:** Quarterly or when major dependencies change
